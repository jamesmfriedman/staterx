---
name: createItems
route: /staterx-api/create-items
menu: Api
---

# createItems

Creates a normalized map of items, stored by a primary key.

```js
createItems(initialValue: {[id: string]: any}, opts: {
  ...DefaultOptions,
  /** A default item to shallowly merge into newly created items. */
  defaultItem?: Partial<T>;
  /** A custom method for generating IDs for new items. */
  generateId?: () => string;
})
```

```js
const myState = createItems({
  '1': { id: '1', text: 'hello' },
  '2': { id: '2', text: 'world' }
});
```

## get

Returns all items as map.

```js
myState.get(); // returns { '1': { id: '1', text: 'hello' }, '2': { id: '2', text: 'world' } }
```

## set

Sets all items.

```js
myState.set({ '1': { id: '1', todo: 'hello' } });
```

## reset

Reset to initial value.

```js
myState.reset();
```

## create

Create one or more new items. If no ID is passed a UUID will be autogenerated for the new items. Note, you can customize how ID's get autoGenerated by passing in the `generateId` option when creating your StateRx Object. You can also specify a `defaultItem` which will be shallowly merged into your newly created one.

```js
myState.create({ id: '2', todo: 'text' });
myState.create([
  { id: '2', todo: 'text' },
  { todo: 'text' } // this will have an autoGenerated id
]);
```

## update

Shallowly update one or more items. You must include the id of the object(s) you are updating.

```js
// update one item
myState.update({ id: '3', todo: 'updated text' });

// update multiple
myState.update([
  { id: '1', todo: 'updated text' },
  { id: '2', todo: 'updated text' }
]);
```

## remove

Remove one or more items by ID

```js
// a single id
myState.remove('3');
// an array of ids
myState.remove(['2', '3']);
// an object with an id property
myState.remove({ id: '2' });
```

## state$

An Observable of the current value, a map of id to object.

```js
myState.state$.subscribe(val => console.log(val)); // { '1': { id: '1', text: 'hello' }, '2': { id: '2', text: 'world' } }
```

## all$

An Observable of all items as an array.

```js
myState.all$.subscribe(val => console.log(val)); // [{ id: '1', text: 'hello' }, { id: '2', text: 'world' }]
```

## byId

Create an Observable that emits a single item by ID

```js
myState.byId('1').subscribe(val => console.log(val)); // { id: '1', text: 'hello' }
```

## byIds

Create an Observable that emits a map of multiple items by ID

```js
myState.byIds(['1', '2']).subscribe(val => console.log(val)); // { '1': { id: '1', text: 'hello' }, '2': { id: '2', text: 'world' } }
```

## mapByKey

Create an Observable that emits a map of multiple items by a specific key's value. This is similar to an SQL group by statement.

```js
myState.mapByKey('text').subscribe(val => console.log(val));

// {
//   hello: [
//     {id: '1', text: 'hello'},
//     {id: '2', text: 'hello'}
//   ],
//   world: [
//     {id: '3', text: 'world'},
//   ]
// }
```
