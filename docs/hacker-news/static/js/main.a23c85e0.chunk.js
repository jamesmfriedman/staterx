(this["webpackJsonpstaterx-hacker-news-clone"]=this["webpackJsonpstaterx-hacker-news-clone"]||[]).push([[0],{35:function(e,t,n){e.exports={nav:"nav_nav__2hDbu",inner:"nav_inner__30IlR",logo:"nav_logo__2lwN5",title:"nav_title__NPDFT",links:"nav_links__3HdcN"}},40:function(e,t,n){e.exports={text:"text_text__2_T5O",headline:"text_headline__3zCtk",title:"text_title__2-J1f",subheading:"text_subheading__21tPP",body:"text_body__2kaLC",caption:"text_caption__VLGZg",inline:"text_inline__lnCW3",inherit:"text_inherit__32WQB",default:"text_default__p2kJM",secondary:"text_secondary__2q8hq",hint:"text_hint__1W4Jm",disabled:"text_disabled__1-ZkC",onPrimary:"text_onPrimary__39tu1",onSecondary:"text_onSecondary__3TO6_",onAccent:"text_onAccent__22RwY"}},56:function(e,t,n){e.exports={view:"view_view__1s2S6",paddingHorizontal:"view_paddingHorizontal__3cGtz",paddingVertical:"view_paddingVertical__29Wvc"}},57:function(e,t,n){e.exports={story:"story_story__MoLlr",title:"story_title__scZ51",domain:"story_domain__1E3EH"}},73:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof e?e:"undefined"!==typeof window?window:void 0).StateRx={objects:{}},a=function(e){r.objects[e.key]=e}}).call(this,n(59))},77:function(e,t,n){e.exports={list:"stories-list_list__2YvAn"}},84:function(e,t,n){e.exports=n(99)},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(71),i=n.n(o),c=n(23),u=n(81),s=n(102),l=n(107),f=n(101),d=n(72),p=n(103),m=function(){return Math.random().toString(36).substring(2,10)},v=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},b=function(e){return Array.isArray(e)?e:[e]},h=function(e){return function(t){return e.next(t),t}},y=function(e){return e.type.split("/",2).join("/")},_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},E=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,c=o.length;i<c;i++,a++)r[a]=o[i];return r},O=n(80),g=n(73),j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},x=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,c=o.length;i<c;i++,a++)r[a]=o[i];return r},S=["SET","RESET"],k=function e(t,n){var r,a=t.default,o=t.key,i=void 0===o?m():o,c=t.autoRun,p=void 0===c||c,v=t.reducer,b=void 0===v?function(e){return e}:v,y=n.state$,_=n.constants,E=n.createReducer,k=n.createActions,N=n.createSelectors,R=function(e,t){return t.reduce((function(t,n){return t[n]=function(e,t){return e+"/"+t}(e,n),t}),{})}(i,x(S,_)),A=function(){return y.getValue()},T=function(e){var t=e.constant,n=e.get,r=new u.a,a=new u.a,o=Object(l.a)(r,a.pipe(Object(O.a)((function(e){return e})))),i=h(r);return{action$:o,set:function(e){return e="function"===typeof e?e(n()):e,i({type:t.SET,data:e})},reset:function(){return i({type:t.RESET})},dispatch:i,_dispatchers$:a}}({constant:R,get:A}),$=T.action$,I=T.dispatch,P=w(T,["action$","dispatch"]),C=w(k({constant:R,get:A,dispatch:I}),[]),V=null===N||void 0===N?void 0:N(y),D=function(e){var t=e.initialState,n=e.constant,r=e.reducer,a=e.userReducer;return function(e,o){switch(o.type.split("/",2).join("/")){case n.SET:return o.data;case n.RESET:return t;default:var i=r(e,o);return i===e?a(e,o):i}}}({constant:R,initialState:a,reducer:E({constant:R}),userReducer:b}),J=$.pipe(Object(d.a)((function(e){return D(y.getValue(),e)})),Object(f.a)()),L=function(){return J.subscribe(y)},M=j(j(j(j({},C),V),P),{key:i,state$:y,action$:$,constant:R,run:L,get:A,clone:function(r){var a=void 0!==(null===r||void 0===r?void 0:r.default)?r.default:A();return e(j(j(j({},t),{key:m(),default:a}),r),j(j({},n),{state$:new s.a(a)}))},dispatch:I,toJSON:function(){return A()},_reducer$:J}),U=null===(r=t.effects)||void 0===r?void 0:r.call(t,M);p&&L();var z=j(j({},M),U);return Object(g.a)(z),z},N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},R=function(e){return{all$:e.pipe(Object(d.a)((function(e){return Object.values(e)}))),byId:function(t){return e.pipe(Object(d.a)((function(e){return e[t]})))},byIds:function(t){return e.pipe(Object(d.a)((function(e){return t.reduce((function(t,n){return n&&(t[n]=e[n]),t}),{})})))},mapByKey:function(t){return e.pipe(Object(d.a)((function(e){var n=e;return Object.values(n).reduce((function(e,n){return n?((e[n[t]]=e[n[t]]||[]).push(n),e):e}),{})})))}}},A=function(e){void 0===e&&(e={});var t=e.generateId,n=void 0===t?v:t,r=e.defaultItem,a=void 0===r?{}:r;return k(e,{state$:new s.a(e.default||{}),constants:["CREATE","REPLACE","REMOVE","UPDATE"],createActions:function(e){return function(e){var t=e.constant,n=e.generateId,r=e.defaultItem,a=e.dispatch;return{create:function(e){var o=b(e||{}).map((function(e){return void 0===e.id&&(e.id=n()),N(N({},"function"===typeof r?r():r),e)}));return a({type:t.CREATE,items:o})},update:function(e){return a({type:t.UPDATE,items:b(e)})},remove:function(e){var n=Array.isArray(e)?e:[e];return a({type:t.REMOVE,items:b("string"===typeof n[0]?n.map((function(e){return{id:e}})):n)})},replace:function(e){return a({type:t.REPLACE,items:b(e)})}}}(N(N({},e),{generateId:n,defaultItem:a}))},createReducer:function(e){return function(e){var t=e.constant,n=e.generateId,r=e.defaultItem;return function(e,a){var o=b("items"in a?a.items:[]);switch(y(a)){case t.CREATE:var i=o.reduce((function(t,n){return t[n.id]=N(N({},e[n.id]||{}),n),t}),{});return N(N({},e),i);case t.UPDATE:var c=o.reduce((function(t,a){var o=e[a.id]||N({id:n()},"function"===typeof r?r():r);return t[a.id]=N(N({},o),a),t}),{});return N(N({},e),c);case t.REPLACE:var u=o.reduce((function(e,t){return e[t.id]=t,e}),{});return N(N({},e),u);case t.REMOVE:return o.reduce((function(e,t){return delete e[t.id],e}),N({},e));default:return e}}}(N(N({},e),{generateId:n,defaultItem:a}))},createSelectors:R})};var T,$=n(22),I=n(64),P=n(104),C=n(54),V=n(50),D=n(74),J=n(105),L=n(63),M=n(75),U=n.n(M),z=(n(89),U.a.initializeApp({databaseURL:"https://hacker-news.firebaseio.com"},"hackernews").database().ref("v0")),F=function(e){var t,n;return(null===(t=e.replace("www.","").split("://"))||void 0===t||null===(n=t[1].split("/"))||void 0===n?void 0:n[0])||""};!function(e){e.topstories="topstories",e.beststories="beststories",e.newstories="newstories",e.from="from",e.front="front",e.askstories="askstories",e.showstories="showstories",e.jobstories="jobstories"}(T||(T={}));var H,W=A({key:"story",default:{},defaultItem:{by:"",kids:[],score:0,text:"",time:0,title:"",type:"story"},effects:function(e){var t=e.all$,n=e.reset,r=e.update,a=e.create,o=t.pipe((function(e){return e.pipe(Object(V.a)((function(e){return Object(I.a)(e).sort((function(e,t){return e.order-t.order}))})))})),i=function(e){return o.pipe(Object(V.a)((function(t){return t.filter((function(t){return t.domain===e}))})))};return{sorted$:o,byDomain:i,onViewFeed:function(e){var t,a,c=e.section,u=e.domain,s=void 0===u?"":u;switch(c){case T.from:t=function(e){return Object(C.a)(fetch("https://hn.algolia.com/api/v1/search?query=".concat(e,"&restrictSearchableAttributes=url")).then((function(e){return e.json()})).then((function(e){return e.hits}))).pipe(Object(V.a)((function(e){return e.map((function(e,t){return{id:Number(e.objectID),by:e.author,kids:[],score:e.points,text:e.story_text||"",time:1e3*e.created_at_i,title:e.title,type:"story",url:e.url,domain:F(e.url),commentCount:e.num_comments,order:t}}))})))}(s),a=i(s);break;default:t=function(e){return Object(L.a)(z.child(e).limitToFirst(30)).pipe(Object(V.a)((function(e){return e.map((function(e){return e.snapshot.val()}))})),Object(D.a)((function(e){return P.a.apply(void 0,Object(I.a)(e.map((function(e){return Object(L.b)(z.child("item/".concat(e)))}))))})),Object(V.a)((function(e){return e.map((function(e){return e.snapshot.val()})).filter(Boolean).map((function(e,t){return e.time=1e3*e.time,e.domain=e.url?F(e.url):"",e.url=e.url||"/item?id=".concat(e.id),e.commentCount=e.descendants,e.order=t,e}))})))}(c),a=o}var l=t.pipe(Object(V.a)((function(e,t){return 0===t&&n(),e}))).subscribe((function(e){return r(e)}));return a.pipe(Object(J.a)((function(){return l.unsubscribe()})))},addStory:function(e){return a(e)}}}}),B=n(76),q=A({key:"user",default:{}}),Y=Object(B.a)({},q);!function(e){var t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;if(t){var n=t.connect({name:"StateRx"});n.init(e.initialState),e.action$.pipe(Object(f.a)()).subscribe({next:function(t){return n.send(t,e.state$.value)},error:function(e){return n.error(e)}}),n.subscribe((function(t){switch(t.type){case"DISPATCH":"JUMP_TO_ACTION"===t.payload.type&&e.setState(JSON.parse(t.state));break;case"ACTION":var n=t.payload&&JSON.parse(t.payload);n&&e.dispatch(n)}}))}else console.error("No Redux Dev Tools extension detected")}(function(e,t){void 0===t&&(t={});var n=Object.values(e).filter((function(e){return"state$"in e})),r=new u.a;n.forEach((function(e){e._dispatchers$.next(r)}));var a=Object.entries(e).map((function(e){var t=e[0],n=e[1];return("state$"in n?n.state$:n).pipe(Object(f.a)(),Object(d.a)((function(e){var n;return(n={})[t]=e,n})))})),o=new s.a(t),i=l.a.apply(void 0,a).pipe(Object(p.a)((function(e,t){return _(_({},e),t)}),t)),c=l.a.apply(void 0,E([r],n.map((function(e){return e.action$})))).pipe(Object(f.a)());i.subscribe(o);return{state$:o,action$:c,dispatch:h(r),initialState:t,setState:function(t){for(var n in t){var r=e[n],a=t[n];"state$"in r?r.state$.next(a):"next"in r?r.next(a):console.warn("Cannot set store value of "+n+". It is not a StateRx Object or subject.")}},getState:function(){return o.getValue()}}}((H={},Object($.a)(H,W.key,W),Object($.a)(H,Y.key,Y),H)));var Z=n(77),G=n.n(Z),K=n(21),X=n(56),Q=n.n(X),ee=n(53),te=n.n(ee);function ne(e){var t,n=e.padding,r=void 0===n||n,o=e.className,i=Object(K.a)(e,["padding","className"]);return a.a.createElement("div",Object.assign({className:te()(o,Q.a.view,(t={},Object($.a)(t,Q.a.paddingHorizontal,!0===r||"horizontal"===r),Object($.a)(t,Q.a.paddingVertical,!0===r||"vertical"===r),t))},i))}var re=n(57),ae=n.n(re),oe=n(14),ie=n(106);function ce(e){var t=e.value,n=Object(ie.a)(t,{addSuffix:!0}).replace("about ","");return a.a.createElement(a.a.Fragment,null,n)}var ue=n(40),se=n.n(ue);function le(e){var t=e.use,n=e.tag,r=void 0===n?"div":n,o=e.className,i=e.children,c=e.inline,u=e.color,s=Object(K.a)(e,["use","tag","className","children","inline","color"]);return a.a.createElement(r,Object.assign({},s,{className:te()(o,se.a.text,t&&se.a[t],c&&se.a.inline,u&&se.a[u])}),i)}function fe(e){var t=e.component,n=e.to,r=e.replace,o=e.innerRef,i=e.children,c=Object(K.a)(e,["component","to","replace","innerRef","children"]),u=function(e){if("object"===typeof e){var t=e.pathname||"";return e.search&&(t+="?".concat(e.search)),t}return e}(n);return u.startsWith("http")?a.a.createElement("a",Object.assign({},c,{href:u}),i):a.a.createElement(oe.a,{component:t,to:n,replace:r,innerRef:o},i)}function de(e){var t=e.story,n=Object(K.a)(e,["story"]);return a.a.createElement("li",Object.assign({},n,{className:ae.a.story}),a.a.createElement("header",null,a.a.createElement(le,{tag:"h2",use:"body",className:ae.a.title},a.a.createElement(fe,{to:t.url},t.title)),t.domain&&a.a.createElement(le,{use:"caption",color:"secondary",inline:!0},a.a.createElement(oe.a,{className:ae.a.domain,to:"/from?site=".concat(t.domain)},"(",t.domain,")"))),a.a.createElement("footer",null,a.a.createElement(le,{use:"caption",color:"secondary"},t.score," point",1!==t.score&&"s"," by"," ",a.a.createElement("a",{href:"/user?id=".concat(t.by)},t.by)," ",a.a.createElement(ce,{value:t.time})," | hide | ",t.commentCount," comments")))}var pe=n(65);function me(e){var t=e.stories;return a.a.createElement(pe.b,{flipKey:JSON.stringify(t)},a.a.createElement(ne,{padding:"vertical"},a.a.createElement("ol",{className:G.a.list},t.map((function(e){return a.a.createElement(pe.a,{key:e.id,flipId:e.id},a.a.createElement(de,{story:e}))})))))}function ve(e){var t=e.section,n=e.domain,o=void 0===n?"":n,i=function(e,t){var n=Object(r.useMemo)((function(){return"function"===typeof e?e():e}),t),a=Object(r.useState)("getValue"in n?n.getValue():void 0),o=a[0],i=a[1];return Object(r.useLayoutEffect)((function(){var e=n.subscribe(i,(function(e){i((function(){throw e}))}));return function(){e.unsubscribe()}}),[n]),o}((function(){return W.onViewFeed({section:t,domain:o})}),[t,o])||[];return a.a.createElement(me,{stories:i})}var be=n(35),he=n.n(be);function ye(){return a.a.createElement("nav",{className:he.a.nav},a.a.createElement(ne,{className:he.a.inner},a.a.createElement(oe.a,{to:"/",className:he.a.logo},a.a.createElement("img",{src:"https://news.ycombinator.com/y18.gif",alt:"Y Combinator Logo"}),a.a.createElement("h1",{className:he.a.title},"Hacker News")),a.a.createElement("div",{className:he.a.links},a.a.createElement(oe.a,{to:"/".concat(T.newstories)},"New"),a.a.createElement(oe.a,{to:"/".concat(T.beststories)},"Best"),a.a.createElement(oe.a,{to:"/".concat(T.askstories)},"Ask"),a.a.createElement(oe.a,{to:"/".concat(T.showstories)},"Show"),a.a.createElement(oe.a,{to:"/".concat(T.jobstories)},"Jobs"))))}var _e=n(12),Ee=Object(_e.a)({basename:"/staterx/hacker-news"}),Oe=[T.topstories,T.newstories,T.beststories,T.askstories,T.showstories,T.jobstories].join("|");var ge=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ye,null),a.a.createElement(c.c,null,a.a.createElement(c.a,{path:"/:path(".concat(Oe,")?"),exact:!0,render:function(e){var t=e.match;return a.a.createElement(ve,{section:t.params.path||T.topstories})}}),a.a.createElement(c.a,{path:"/from",exact:!0,render:function(){return a.a.createElement(ve,{section:T.from,domain:(e="site",new URLSearchParams(window.location.search).get(e)||"")});var e}}),a.a.createElement(c.a,{path:"/new",extact:!0,render:function(){return a.a.createElement(a.a.Fragment,null,"New")}})))};n(96),n(97),n(98),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e){var t=e.children;return a.a.createElement(c.b,{history:Ee},t)}i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(je,null,a.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[84,1,2]]]);
//# sourceMappingURL=main.a23c85e0.chunk.js.map